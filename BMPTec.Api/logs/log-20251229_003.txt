2025-12-29 15:28:40.866 -03:00 [INF] Starting BMPTec API...
2025-12-29 15:28:44.555 -03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-12-29 15:28:44.680 -03:00 [WRN] No store type was specified for the decimal property 'Saldo' on entity type 'Conta'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-12-29 15:28:44.686 -03:00 [WRN] No store type was specified for the decimal property 'Taxa' on entity type 'Transferencia'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-12-29 15:28:44.686 -03:00 [WRN] No store type was specified for the decimal property 'Valor' on entity type 'Transferencia'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-12-29 15:28:45.790 -03:00 [WRN] No store type was specified for the decimal property 'Saldo' on entity type 'Conta'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-12-29 15:28:45.790 -03:00 [WRN] No store type was specified for the decimal property 'Taxa' on entity type 'Transferencia'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-12-29 15:28:45.791 -03:00 [WRN] No store type was specified for the decimal property 'Valor' on entity type 'Transferencia'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-12-29 15:28:47.053 -03:00 [INF] BMPTec API started successfully
2025-12-29 15:32:10.984 -03:00 [WRN] Failed to determine the https port for redirect.
2025-12-29 15:32:17.551 -03:00 [INF] Recebida requisição para criar conta para Guilherme
2025-12-29 15:32:17.554 -03:00 [INF] Iniciando criação de conta para CPF: 131.643.709-46
2025-12-29 15:32:18.985 -03:00 [ERR] Erro ao criar conta para CPF: 131.643.709-46
System.ArgumentException: Cliente deve ser maior de 18 anos
   at BMPTec.Domain.Entities.Cliente.Validate() in C:\dev\programacao\API-Banco-Chu\BMPTec.Domain\Entities\Cliente.cs:line 55
   at BMPTec.Domain.Entities.Cliente..ctor(String nome, String cpf, String email, DateTime dataNascimento, String telefone) in C:\dev\programacao\API-Banco-Chu\BMPTec.Domain\Entities\Cliente.cs:line 20
   at BMPTec.Application.Services.ContaService.CriarContaAsync(CriarContaRequest request) in C:\dev\programacao\API-Banco-Chu\BMPTec.Application\Services\ContaService.cs:line 56
2025-12-29 15:32:19.204 -03:00 [WRN] Erro de validação ao criar conta
System.ArgumentException: Cliente deve ser maior de 18 anos
   at BMPTec.Domain.Entities.Cliente.Validate() in C:\dev\programacao\API-Banco-Chu\BMPTec.Domain\Entities\Cliente.cs:line 55
   at BMPTec.Domain.Entities.Cliente..ctor(String nome, String cpf, String email, DateTime dataNascimento, String telefone) in C:\dev\programacao\API-Banco-Chu\BMPTec.Domain\Entities\Cliente.cs:line 20
   at BMPTec.Application.Services.ContaService.CriarContaAsync(CriarContaRequest request) in C:\dev\programacao\API-Banco-Chu\BMPTec.Application\Services\ContaService.cs:line 56
   at BMPTec.API.Controllers.v1.ContasController.CriarConta(CriarContaRequest request) in C:\dev\programacao\API-Banco-Chu\BMPTec.Api\Controllers\ContasController.cs:line 42
2025-12-29 15:34:16.377 -03:00 [INF] Recebida requisição para criar conta para Guilherme
2025-12-29 15:34:16.377 -03:00 [INF] Iniciando criação de conta para CPF: 131.643.709-46
2025-12-29 15:34:16.863 -03:00 [INF] Novo cliente criado: "e815d096-5acc-4142-9cf0-08de4708df57"
2025-12-29 15:34:24.991 -03:00 [ERR] Erro ao criar conta para CPF: 131.643.709-46
System.InvalidOperationException: The LINQ expression 'DbSet<Conta>()
    .Max(c => (long?)(long)c.Id.GetHashCode())' could not be translated. Additional information: Translation of method 'object.GetHashCode' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.<VisitMethodCall>g__CheckTranslated|15_0(ShapedQueryExpression translated, <>c__DisplayClass15_0& )
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, LambdaExpression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.MaxAsync[TSource,TResult](IQueryable`1 source, Expression`1 selector, CancellationToken cancellationToken)
   at BMPTec.Infrastructure.Services.DatabaseSequenceGenerator.GetNextFromMaxIdAsync(String sequenceName) in C:\dev\programacao\API-Banco-Chu\BMPTec.Infrastructure\Services\DatabaseSequenceGenerator.cs:line 193
   at BMPTec.Infrastructure.Services.DatabaseSequenceGenerator.GetNextFromDatabaseAsync(String sequenceName) in C:\dev\programacao\API-Banco-Chu\BMPTec.Infrastructure\Services\DatabaseSequenceGenerator.cs:line 164
   at BMPTec.Infrastructure.Services.DatabaseSequenceGenerator.NextAsync(String sequenceName) in C:\dev\programacao\API-Banco-Chu\BMPTec.Infrastructure\Services\DatabaseSequenceGenerator.cs:line 58
   at BMPTec.Infrastructure.Services.DatabaseSequenceGenerator.GerarNumeroContaAsync() in C:\dev\programacao\API-Banco-Chu\BMPTec.Infrastructure\Services\DatabaseSequenceGenerator.cs:line 69
   at BMPTec.Application.Services.ContaService.GerarNumeroContaUnicoAsync() in C:\dev\programacao\API-Banco-Chu\BMPTec.Application\Services\ContaService.cs:line 118
   at BMPTec.Application.Services.ContaService.CriarContaAsync(CriarContaRequest request) in C:\dev\programacao\API-Banco-Chu\BMPTec.Application\Services\ContaService.cs:line 68
2025-12-29 15:34:25.114 -03:00 [WRN] Operação inválida ao criar conta
System.InvalidOperationException: The LINQ expression 'DbSet<Conta>()
    .Max(c => (long?)(long)c.Id.GetHashCode())' could not be translated. Additional information: Translation of method 'object.GetHashCode' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.<VisitMethodCall>g__CheckTranslated|15_0(ShapedQueryExpression translated, <>c__DisplayClass15_0& )
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, LambdaExpression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.MaxAsync[TSource,TResult](IQueryable`1 source, Expression`1 selector, CancellationToken cancellationToken)
   at BMPTec.Infrastructure.Services.DatabaseSequenceGenerator.GetNextFromMaxIdAsync(String sequenceName) in C:\dev\programacao\API-Banco-Chu\BMPTec.Infrastructure\Services\DatabaseSequenceGenerator.cs:line 193
   at BMPTec.Infrastructure.Services.DatabaseSequenceGenerator.GetNextFromDatabaseAsync(String sequenceName) in C:\dev\programacao\API-Banco-Chu\BMPTec.Infrastructure\Services\DatabaseSequenceGenerator.cs:line 164
   at BMPTec.Infrastructure.Services.DatabaseSequenceGenerator.NextAsync(String sequenceName) in C:\dev\programacao\API-Banco-Chu\BMPTec.Infrastructure\Services\DatabaseSequenceGenerator.cs:line 58
   at BMPTec.Infrastructure.Services.DatabaseSequenceGenerator.GerarNumeroContaAsync() in C:\dev\programacao\API-Banco-Chu\BMPTec.Infrastructure\Services\DatabaseSequenceGenerator.cs:line 69
   at BMPTec.Application.Services.ContaService.GerarNumeroContaUnicoAsync() in C:\dev\programacao\API-Banco-Chu\BMPTec.Application\Services\ContaService.cs:line 118
   at BMPTec.Application.Services.ContaService.CriarContaAsync(CriarContaRequest request) in C:\dev\programacao\API-Banco-Chu\BMPTec.Application\Services\ContaService.cs:line 68
   at BMPTec.API.Controllers.v1.ContasController.CriarConta(CriarContaRequest request) in C:\dev\programacao\API-Banco-Chu\BMPTec.Api\Controllers\ContasController.cs:line 42
2025-12-29 16:54:17.469 -03:00 [INF] Recebida requisição para criar conta para Guilherme
2025-12-29 16:54:18.398 -03:00 [INF] Iniciando criação de conta para CPF: 131.643.709-46
2025-12-29 16:54:18.490 -03:00 [ERR] An error occurred using the connection to database 'BMPTecDB_Dev' on server 'localhost,1433'.
2025-12-29 16:54:18.596 -03:00 [ERR] An error occurred using the connection to database 'BMPTecDB_Dev' on server 'localhost,1433'.
2025-12-29 16:54:19.685 -03:00 [ERR] An error occurred using the connection to database 'BMPTecDB_Dev' on server 'localhost,1433'.
2025-12-29 16:54:22.937 -03:00 [ERR] An error occurred using the connection to database 'BMPTecDB_Dev' on server 'localhost,1433'.
2025-12-29 16:54:30.090 -03:00 [ERR] An error occurred using the connection to database 'BMPTecDB_Dev' on server 'localhost,1433'.
2025-12-29 16:54:54.292 -03:00 [INF] Starting BMPTec API...
2025-12-29 16:54:56.676 -03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-12-29 16:54:56.750 -03:00 [WRN] No store type was specified for the decimal property 'Saldo' on entity type 'Conta'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-12-29 16:54:56.755 -03:00 [WRN] No store type was specified for the decimal property 'Taxa' on entity type 'Transferencia'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-12-29 16:54:56.755 -03:00 [WRN] No store type was specified for the decimal property 'Valor' on entity type 'Transferencia'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-12-29 16:54:57.871 -03:00 [WRN] No store type was specified for the decimal property 'Saldo' on entity type 'Conta'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-12-29 16:54:57.872 -03:00 [WRN] No store type was specified for the decimal property 'Taxa' on entity type 'Transferencia'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-12-29 16:54:57.872 -03:00 [WRN] No store type was specified for the decimal property 'Valor' on entity type 'Transferencia'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-12-29 16:55:18.151 -03:00 [ERR] Failed executing DbCommand (20,156ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [BMPTecDB_Dev];
2025-12-29 16:55:18.208 -03:00 [FTL] Application startup failed
Microsoft.Data.SqlClient.SqlException (0x80131904): Could not obtain exclusive lock on database 'model'. Retry the operation later.
CREATE DATABASE failed. Some file names listed could not be created. Check related errors.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean isAsync, Int32 timeout, Boolean asyncWrite)
   at Microsoft.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String methodName)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IEnumerable`1 migrationCommands, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.Create()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabaseCreator.EnsureCreated()
   at Program.<Main>$(String[] args) in C:\dev\programacao\API-Banco-Chu\BMPTec.Api\Program.cs:line 149
ClientConnectionId:d7aba3ca-64d0-4f88-a8de-462a970aa522
Error Number:1807,State:3,Class:16
